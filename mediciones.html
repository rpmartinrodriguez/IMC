<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalle del Paciente</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1 id="patientName">Cargando paciente...</h1>
            <a href="index.html" class="link-calculadora">Volver a la Lista</a>
        </header>

        <!-- Historial de mediciones del paciente -->
        <div class="historial-container">
            <h2>Historial de Mediciones</h2>
            <div id="measurementHistoryList">
                <!-- Las tarjetas de mediciones de este paciente se cargarán aquí -->
            </div>
        </div>

        <!-- Botón flotante para agregar nueva medición -->
        <button id="addMeasurementBtn" class="fab">+</button>
    </div>

    <!-- Ventana Modal para agregar nueva medición -->
    <div id="addMeasurementModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2>Registrar Nueva Medición</h2>
            <form id="addMeasurementForm">
                <!-- Sección de Pesos -->
                <fieldset>
                    <legend>Análisis de Peso</legend>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fecha">Fecha Actual</label>
                            <input type="text" id="fecha" disabled>
                        </div>
                        <div class="form-group">
                            <label for="pesoAnterior">Peso Anterior (kg)</label>
                            <input type="number" id="pesoAnterior" disabled>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="pesoActual">Peso Actual (kg)</label>
                            <input type="number" id="pesoActual" step="0.1" required>
                        </div>
                        <div class="form-group">
                            <label>Resultado</label>
                            <p id="diferenciaPeso" class="result-display">-</p>
                        </div>
                    </div>
                </fieldset>

                <!-- Sección de Indicadores -->
                <fieldset>
                    <legend>Indicadores (Pliegues)</legend>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="pt">PT</label>
                            <input type="number" id="pt" class="indicator-input" step="0.1" required>
                        </div>
                        <div class="form-group">
                            <label for="pse">PSE</label>
                            <input type="number" id="pse" class="indicator-input" step="0.1" required>
                        </div>
                        <div class="form-group">
                            <label for="psi">PSI</label>
                            <input type="number" id="psi" class="indicator-input" step="0.1" required>
                        </div>
                        <div class="form-group">
                            <label for="pa">PA</label>
                            <input type="number" id="pa" class="indicator-input" step="0.1" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Tejido Graso (%)</label>
                        <p id="tejidoGraso" class="result-display">-</p>
                    </div>
                </fieldset>
                
                <button type="submit" class="btn-guardar">Guardar Medición</button>
            </form>
        </div>
    </div>

    <!-- SDKs de Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-firestore-compat.js"></script>
    
    <!-- Script para esta página -->
    <script src="mediciones.js"></script>
</body>
</html>
